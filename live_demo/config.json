{
  "data": {
    "symbol": "BTCUSDT",
    "interval": "5m",
    "warmup_bars": 200,
    "overlays": [
      "15m",
      "1h"
    ]
  },
  "exchanges": {
    "active": "hyperliquid",
    "binance_testnet": {
      "api_key": "j4KIRgyqByoD7FkrrJk2YupNtDJwNObfmOxFpcUdY7fZUJIOSRIgZo7PtxxSq0yv",
      "api_secret": "CGE76pUF8Z5AJN98MCsHpzBg9JW9LjtbbLx3JrdIQRfEQq4Tobhx6fnmFj5hfeLD",
      "base_url": "https://testnet.binancefuture.com"
    },
    "binance_mainnet": {
      "api_key": "",
      "api_secret": "",
      "base_url": "https://fapi.binance.com"
    },
    "hyperliquid": {
      "base_url": "https://api.hyperliquid.xyz/info",
      "ws_url": "wss://api.hyperliquid.xyz/ws",
      "funding": {
        "mode": "settled",
        "epoch_hours": 8,
        "ttl_seconds": 600,
        "path": "/v1/funding",
        "key_time": "time",
        "key_rate": "funding"
      }
    }
  },
  "cohorts": {
    "top_file": "live_demo/top_cohort.csv",
    "bottom_file": "live_demo/bottom_cohort.csv",
    "weights_file": "paper_trading_outputs/models/weights_daily.csv",
    "smoothing_gamma": 0.6,
    "adv_window_days": 20
  },
  "thresholds": {
    "S_MIN": 0.003,
    "M_MIN": 0.003,
    "CONF_MIN": 0.08,
    "ALPHA_MIN": 0.008,
    "flip_mood": true,
    "flip_model": true,
    "allow_model_only_when_mood_neutral": true,
    "exit_conf_min": 0.15,
    "exit_alpha_min": 0.12,
    "max_position_duration_bars": 288
  },
  "alerts": {
    "ic_drift": {
      "warning": -0.03,
      "critical": -0.05,
      "check_interval_bars": 12
    },
    "drawdown": {
      "warning": -0.02,
      "critical": -0.03,
      "check_interval_bars": 1
    },
    "costs": {
      "warning": 7.0,
      "critical": 10.0,
      "check_interval_bars": 12
    },
    "capacity": {
      "warning": 0.015,
      "critical": 0.03,
      "check_interval_bars": 12
    }
  },
  "health": {
    "ic_window": 200,
    "vol_window": 20,
    "hit_rate_window": 100,
    "pnl_window": 252,
    "ws_staleness_ms_threshold": 60000
  },
  "risk": {
    "sigma_target": 0.20,
    "pos_max": 1.0,
    "cooldown_bars": 1,
    "realized_vol_window": 50,
    "base_notional": 25000.0,
    "vol_floor": 0.15,
    "adv_cap_pct": 1.5,
    "rebalance_min_pos_delta": 0.01,
    "daily_stop_dd_pct": 1.5,
    "warmup_skip_bars": 0,
    "cost_bps": 5.0,
    "slippage_bps": 10.0,
    "impact_k": 1.0,
    "enable_forced_exits": true,
    "max_position_duration_bars": 288,
    "stop_loss_bps": 200.0,
    "take_profit_bps": 300.0
  },
  "costs": {
    "cost_bps": 5.0,
    "impact_k": 0.0,
    "slippage_bps": 0.0,
    "max_impact_bps_hard": 200.0,
    "min_net_edge_bps": 10.0,
    "max_total_cost_bps": 25.0,
    "enable_net_edge_gating": true
  },
  "execution": {
    "dry_run": true,
    "one_shot": false,
    "force_validation_trade": false,
    "health_emit_every_bars": 3,
    "health_pred_window": 60,
    "mode": "market",
    "passive_timeout_s": 10,
    "use_overlay": false,
    "bandit": {
      "enabled": true,
      "state_path": "paper_trading_outputs/runtime_bandit.json",
      "epsilon": 0.05,
      "model_optimism": 0.03
    }
  },
  "overlay": {
    "enabled": false,
    "timeframes": [
      "15m",
      "1h"
    ],
    "rollup_windows": {
      "15m": 3,
      "1h": 12
    },
    "weights": {
      "5m": 0.5,
      "15m": 0.3,
      "1h": 0.2
    },
    "alignment_rules": {
      "require_5m_15m_agreement": true,
      "allow_1h_override": true,
      "neutral_1h_override": true,
      "min_confidence": 0.55,
      "min_alpha": 0.02,
      "neutral_band": 0.10
    },
    "signal_thresholds": {
      "default": {
        "min_confidence": 0.55,
        "min_alpha": 0.02,
        "neutral_band": 0.10
      },
      "5m": {
        "min_confidence": 0.55,
        "min_alpha": 0.02,
        "neutral_band": 0.10
      },
      "15m": {
        "min_confidence": 0.55,
        "min_alpha": 0.02,
        "neutral_band": 0.10
      },
      "1h": {
        "min_confidence": 0.55,
        "min_alpha": 0.02,
        "neutral_band": 0.10
      }
    }
  },
  "microstructure": {
    "enable": true,
    "max_spread_bps": 5.0,
    "min_book_qty": 0.0
  },
  "sheets": {
    "sheet_id": "1YRnjIhhkbhNhRk7mb8o1LMuC-YP7lO_X1DRocW66-ls",
    "creds_json": "C:/Users/yashw/secrets/gcp-sheets.json",
    "tabs": {
      "hyperliquid": "hyperliquid_sheet",
      "signals": "signals",
      "mirror": "log_mirror",
      "bandit": "bandit",
      "executions": "executions_paper",
      "equity": "equity",
      "overlay": "overlay",
      "health": "health_metrics",
      "alerts": "system_alerts",
      "pnl": "pnl_analysis"
    }
  },
  "logging": {
    "retention_days": 30,
    "base_dir": "../paper_trading_outputs/logs",
    "formats": {
      "market": [
        "ts_ist",
        "asset",
        "bar_id",
        "mid",
        "bid1",
        "ask1",
        "spread_bps",
        "rv_1h"
      ],
      "signals": [
        "ts_ist",
        "asset",
        "bar_id",
        "S_top",
        "S_bot",
        "F_top_norm",
        "F_bot_norm"
      ],
      "ensemble": [
        "ts_ist",
        "asset",
        "bar_id",
        "pred_stack",
        "pred_bma",
        "bandit_arm",
        "ic_200"
      ],
      "health": [
        "ts_ist",
        "Sharpe_roll_1d",
        "max_dd_to_date",
        "ic_drift"
      ],
      "overlay": [
        "ts_ist",
        "asset",
        "bar_id",
        "direction",
        "alpha",
        "confidence",
        "alignment_rule",
        "chosen_timeframes"
      ]
    },
    "sinks": {
      "sheets": true,
      "emitter": true,
      "llm_jsonl": true
    },
    "topics": {
      "signals": "emitter",
      "executions": "llm",
      "costs": "emitter",
      "health": "emitter",
      "ensemble": "llm",
      "equity": "llm",
      "overlay_status": "llm",
      "alerts": "llm",
      "hyperliquid_fills": "llm"
    }
  },
  "ensemble": {
    "enable_bma": true,
    "source": "bma",
    "bma": {
      "kappa": 8.0,
      "ic_window_bars": 200,
      "min_coverage_bars": 600,
      "freeze": false
    }
  },
  "alignment": {
    "agree_5m_15m_full": true,
    "halve_on_1h_opposition": true,
    "skip_if_5m_vs_15m_conflict_unless_score_gt_band_x": 2.0
  },
  "calibration": {
    "band_bps": 15,
    "report_windows": {
      "ab_rolling_hours": 24
    }
  },
  "risk_controls": {
    "sigma_target_ann": 0.10,
    "pi_max": 3.0,
    "daily_stop_sigma_mult": 3.0,
    "adv_order_cap": 0.005,
    "adv_hour_cap": 0.02,
    "delta_pi_min_bps": 5.0,
    "spread_mult_cap": 2.0,
    "funding_guard_sigma": 2.0,
    "funding_guard_bias": 0.1,
    "min_sign_flip_gap_s": 5,
    "max_orders_per_sec": 1,
    "max_impact_bps": 50.0
  },
  "bandit": {
    "algo": "exp3",
    "eta": 0.06,
    "floor": 0.06,
    "arms": [
      "Base",
      "BMA",
      "Top",
      "Bot",
      "Micro"
    ]
  },
  "artifacts": {
    "latest_manifest": "live_demo/models/LATEST.json"
  }
}